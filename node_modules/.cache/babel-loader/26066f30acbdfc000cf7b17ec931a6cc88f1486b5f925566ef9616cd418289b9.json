{"ast":null,"code":"import axinst from '@/../server/axios-config.js';\nexport default {\n  name: 'PassApproval',\n  data() {\n    return {\n      passes: []\n    };\n  },\n  methods: {\n    checkApproval(pass) {\n      axinst.get(`/check_approval/${pass._id}`).then(response => {\n        if (response.data.message === 'The pass is approved') {\n          pass.approvalStatus = response.data.message;\n          pass.unapprovedItems = [];\n        } else if (response.data.message === 'The pass is not fully approved') {\n          pass.approvalStatus = '';\n          pass.unapprovedItems = response.data.unapprovedItems;\n        } else {\n          pass.approvalStatus = '';\n          pass.unapprovedItems = [];\n        }\n      }).catch(error => {\n        console.log(error);\n        pass.approvalStatus = '';\n        pass.unapprovedItems = [];\n      });\n    },\n    getAllPasses() {\n      axinst.get('/passes').then(response => {\n        this.passes = response.data;\n        this.passes.forEach(pass => {\n          this.checkApproval(pass);\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  },\n  created() {\n    this.getAllPasses();\n  }\n};","map":{"version":3,"names":["axinst","name","data","passes","methods","checkApproval","pass","get","_id","then","response","message","approvalStatus","unapprovedItems","catch","error","console","log","getAllPasses","forEach","created"],"sources":["/home/vagrant/sites/ppc/src/pass_appr/PassApproval.vue"],"sourcesContent":["<template>\n  <div>\n    <div v-for=\"pass in passes\" :key=\"pass.id\">\n      <div class=\"james\">\n        <div>{{ pass.id }}</div>\n        <div>{{ pass.remarks }}</div>\n        <div>{{ pass.nature }}</div>\n        <br>\n        <div v-if=\"approvalStatus\" class=\"success-message\">{{ pass.approvalStatus }}</div>\n        <div v-else-if=\"pass.unapprovedItems.length > 0\" class=\"error-message\">\n          Pass is not fully approved.<br>Unapproved items: {{ pass.unapprovedItems.join(\", \") }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axinst from '@/../server/axios-config.js';\n\nexport default {\n  name: 'PassApproval',\n  data() {\n    return {\n      passes: []\n    };\n  },\n  methods: {\n    checkApproval(pass) {\n      axinst.get(`/check_approval/${pass._id}`)\n        .then(response => {\n          if (response.data.message === 'The pass is approved') {\n            pass.approvalStatus = response.data.message;\n            pass.unapprovedItems = [];\n          } else if (response.data.message === 'The pass is not fully approved') {\n            pass.approvalStatus = '';\n            pass.unapprovedItems = response.data.unapprovedItems;\n          } else {\n            pass.approvalStatus = '';\n            pass.unapprovedItems = [];\n          }\n        })\n        .catch(error => {\n          console.log(error);\n          pass.approvalStatus = '';\n          pass.unapprovedItems = [];\n        });\n    },\n    getAllPasses() {\n      axinst.get('/passes')\n        .then(response => {\n          this.passes = response.data;\n          this.passes.forEach(pass => {\n            this.checkApproval(pass);\n          });\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    }\n  },\n  created() {\n    this.getAllPasses();\n  }\n}\n</script>\n\n<style scoped>\n.success-message {\n  color: green;\n}\n\n.error-message {\n  color: red;\n}\n\n.james{\n  box-sizing: border-box;\n  width: 450px;\n  height: auto;\n  padding: 20px;\n  margin-top: 30px;\n  border-radius: 4px;\n\n  background-color: #dddddd;\n}\n</style>\n"],"mappings":"AAkBA,OAAOA,MAAK,MAAO,6BAA6B;AAEhD,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE;IACV,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,aAAaA,CAACC,IAAI,EAAE;MAClBN,MAAM,CAACO,GAAG,CAAE,mBAAkBD,IAAI,CAACE,GAAI,EAAC,EACrCC,IAAI,CAACC,QAAO,IAAK;QAChB,IAAIA,QAAQ,CAACR,IAAI,CAACS,OAAM,KAAM,sBAAsB,EAAE;UACpDL,IAAI,CAACM,cAAa,GAAIF,QAAQ,CAACR,IAAI,CAACS,OAAO;UAC3CL,IAAI,CAACO,eAAc,GAAI,EAAE;QAC3B,OAAO,IAAIH,QAAQ,CAACR,IAAI,CAACS,OAAM,KAAM,gCAAgC,EAAE;UACrEL,IAAI,CAACM,cAAa,GAAI,EAAE;UACxBN,IAAI,CAACO,eAAc,GAAIH,QAAQ,CAACR,IAAI,CAACW,eAAe;QACtD,OAAO;UACLP,IAAI,CAACM,cAAa,GAAI,EAAE;UACxBN,IAAI,CAACO,eAAc,GAAI,EAAE;QAC3B;MACF,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK;QACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;QAClBT,IAAI,CAACM,cAAa,GAAI,EAAE;QACxBN,IAAI,CAACO,eAAc,GAAI,EAAE;MAC3B,CAAC,CAAC;IACN,CAAC;IACDK,YAAYA,CAAA,EAAG;MACblB,MAAM,CAACO,GAAG,CAAC,SAAS,EACjBE,IAAI,CAACC,QAAO,IAAK;QAChB,IAAI,CAACP,MAAK,GAAIO,QAAQ,CAACR,IAAI;QAC3B,IAAI,CAACC,MAAM,CAACgB,OAAO,CAACb,IAAG,IAAK;UAC1B,IAAI,CAACD,aAAa,CAACC,IAAI,CAAC;QAC1B,CAAC,CAAC;MACJ,CAAC,EACAQ,KAAK,CAACC,KAAI,IAAK;QACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB,CAAC,CAAC;IACN;EACF,CAAC;EACDK,OAAOA,CAAA,EAAG;IACR,IAAI,CAACF,YAAY,EAAE;EACrB;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}