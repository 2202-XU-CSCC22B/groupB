{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-0815643b\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"header\"\n};\nconst _hoisted_2 = {\n  id: \"id\"\n};\nconst _hoisted_3 = {\n  class: \"date\"\n};\nconst _hoisted_4 = {\n  class: \"header\",\n  style: {\n    \"margin-bottom\": \"8px\"\n  }\n};\nconst _hoisted_5 = {\n  id: \"requestor\"\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = {\n  key: 0\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_12 = {\n  key: 1\n};\nconst _hoisted_13 = {\n  id: \"label\"\n};\nconst _hoisted_14 = {\n  key: 2\n};\nconst _hoisted_15 = {\n  id: \"label\"\n};\nconst _hoisted_16 = {\n  id: \"item\"\n};\nconst _hoisted_17 = [\"innerHTML\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.passes, pass => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: pass._id\n    }, [_createElementVNode(\"div\", {\n      class: _normalizeClass(_ctx.box)\n    }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, _toDisplayString(pass._id), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_3, _toDisplayString($options.formatDate(pass.created)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createTextVNode(\"Requested by \"), _createElementVNode(\"strong\", null, _toDisplayString(pass.req.name), 1 /* TEXT */)]), _createElementVNode(\"button\", {\n      id: \"seamen\",\n      onClick: $event => pass.showAllItems = !pass.showAllItems\n    }, _toDisplayString(pass.showAllItems ? 'Hide Item Details' : 'Show Item Details'), 9 /* TEXT, PROPS */, _hoisted_6)]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(pass.nature, (entry, key) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: key\n      }, [_createElementVNode(\"div\", null, [_createElementVNode(\"strong\", null, _toDisplayString($options.fieldNames[key] || key) + \":\", 1 /* TEXT */), _createTextVNode(\" \" + _toDisplayString($options.fieldNames[entry] || entry), 1 /* TEXT */)])]);\n    }), 128 /* KEYED_FRAGMENT */)), _hoisted_7, pass.showAllItems ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(pass.ptcs, (entry, key) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: key\n      }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(entry, (value, prop) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: prop\n        }, [prop !== '_id' && prop !== 'tag' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"strong\", null, _toDisplayString($options.fieldNames[prop] || prop) + \":\", 1 /* TEXT */), _createTextVNode(\" \" + _toDisplayString($options.fieldNames[value] || value), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]);\n      }), 128 /* KEYED_FRAGMENT */)), _hoisted_10]);\n    }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), _hoisted_11, pass.approvalStatus == 'approved' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, _toDisplayString(pass.approvalStatus), 1 /* TEXT */)])) : pass.approvalStatus == 'unapproved' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, _toDisplayString(pass.approvalStatus), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"span\", {\n      innerHTML: pass.unapprovedItems.join('<br>')\n    }, null, 8 /* PROPS */, _hoisted_17)])])) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */)]);\n  }), 128 /* KEYED_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","id","style","_createElementVNode","_createElementBlock","_Fragment","_renderList","$data","passes","pass","key","_id","_normalizeClass","_ctx","box","_hoisted_1","_hoisted_2","_toDisplayString","_hoisted_3","$options","formatDate","created","_hoisted_4","_hoisted_5","req","name","onClick","$event","showAllItems","_hoisted_6","nature","entry","fieldNames","_hoisted_7","_hoisted_8","ptcs","value","prop","_hoisted_9","_hoisted_10","_hoisted_11","approvalStatus","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","innerHTML","unapprovedItems","join"],"sources":["/home/vagrant/sites/ppc/src/home/PassApproval.vue"],"sourcesContent":["<template>\n  <div>\n    <div v-for=\"pass in passes\" :key=\"pass._id\">\n      <div :class='box'>\n        <div class=\"header\">\n          <div id=\"id\">{{ pass._id }}</div>\n          <div class=\"date\">{{ formatDate(pass.created) }}</div>\n        </div>\n\n        <div class=\"header\" style=\"margin-bottom: 8px\">\n          <div id=\"requestor\">Requested by <strong>{{ pass.req.name }}</strong></div>\n          <button id=\"seamen\" @click=\"pass.showAllItems = !pass.showAllItems\">\n            {{ pass.showAllItems ? 'Hide Item Details' : 'Show Item Details' }}\n          </button>\n        </div>\n        \n        <div v-for=\"(entry, key) in pass.nature\" :key=\"key\">\n          <div><strong>{{ fieldNames[key] || key }}:</strong> {{ fieldNames[entry] || entry }}</div>\n        </div>\n        <br>\n\n        <div v-if=\"pass.showAllItems\">\n          <div v-for=\"(entry, key) in pass.ptcs\" :key=\"key\">\n            <div v-for=\"(value, prop) in entry\" :key=\"prop\">\n              <div v-if=\"prop !== '_id' && prop !== 'tag' \"><strong>{{ fieldNames[prop] || prop }}:</strong> {{ fieldNames[value] || value }}</div>\n            </div>\n            <br>\n          </div>\n        </div>\n       \n        <br>\n        <div v-if=\"pass.approvalStatus == 'approved'\">\n          <div id=\"label\">{{ pass.approvalStatus }}</div>\n        </div>\n        \n        <div v-else-if=\"pass.approvalStatus == 'unapproved'\">\n          <div id=\"label\">{{ pass.approvalStatus }}</div>\n          <div id=\"item\">\n            <span v-html=\"pass.unapprovedItems.join('<br>')\"></span>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axinst from '@/../server/axios-config.js';\nimport fieldNames from '@/../server/fieldNames.js';\n\nexport default {\n  name: 'PassApproval',\n  data() {\n    return {\n      passes: [],\n      currentDate: ''\n    };\n  },\n  methods: {\n    formatDate(date) {\n      return new Date(date).toLocaleDateString('en-US', {\n        month: 'long',\n        day: 'numeric',\n        year: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric'\n      })\n    },\n\n    checkApproval(pass) {\n      axinst.get(`/check_approval/${pass._id}`)\n        .then(response => {\n          if (response.data.message === 'approved') {\n            pass.approvalStatus = response.data.message;\n            pass.unapprovedItems = [];\n          } else if (response.data.message === 'unapproved') {\n            pass.approvalStatus = response.data.message;\n            pass.unapprovedItems = response.data.unapprovedItems;\n          } else {\n            pass.approvalStatus = 'Error in retrieving pass data!';\n            pass.unapprovedItems = [];\n          }\n        })\n        .catch(error => {\n          console.log(error);\n          pass.approvalStatus = '';\n          pass.unapprovedItems = [];\n        });\n    },\n    getAllPasses() {\n      axinst.get('/passes')\n        .then(response => {\n          this.passes = response.data;\n          this.passes.forEach(pass => {\n            this.checkApproval(pass);\n          });\n\n          this.passes.sort((a, b) => new Date(b.created) - new Date(a.created));\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    },\n\n    setCurrentDate() {\n      // Get the current date\n      var currentDate = new Date();\n\n      // Format the date\n      var options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n      this.currentDate = currentDate.toLocaleDateString(undefined, options);\n    }\n  },\n  created() {\n    this.getAllPasses();\n  },\n  \n  computed: {\n    fieldNames() {\n      return fieldNames;\n    }\n  },\n\n  mounted() {\n    this.setCurrentDate();\n  }\n}\n</script>\n\n<style scoped>\n\n#seamen{\n  background-color: #f2f2f8;\n  border-radius: 8px;\n  box-sizing: border-box;\n  font-family: var(--text);\n  font-size: 15px;\n  text-transform: uppercase;\n  padding: 6px 12px;\n  transition: 0.2s;\n}\n\n#seamen:hover{\n  background-color: #e0e0e7;\n  cursor: pointer;\n}\n\n.header{\n  align-items: center;\n  display: flex;\n  justify-content: space-between;\n  width: auto;\n}\n.date{\n  font-weight: bold;\n}\n\n#item{\n  margin-top: 6px;\n}\n\n#label {\n  font-size: 18px;\n  font-weight: bold;\n  text-transform: uppercase;\n}\n\n#id {\n  font-size: 20px;\n  font-weight: bold;\n}\n\n#requestor{\n  font-size: 16px;\n}\n.status.success {\n  background-color: #e9f4f5;\n  border: 3px solid #14ccbd;\n}\n\n.status.error {\n  background-color: #f7e5e7;\n  border: 3px solid #ff3a4b;\n}\n\n.box {\n  border-radius: 6px;\n  box-sizing: border-box;\n  height: auto;\n  margin-top: 30px;\n  padding: 20px;\n  text-align: left;\n  width: 600px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}